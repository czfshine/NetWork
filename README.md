# NetWork
一些实验性质的网络相关的代码



# 0.代码使用

整个代码库分成了不同的模块,推荐直接使用IDE打开调试运行.



# 1.代码说明

* 前缀`cs` 是一个C/S模式的交互形式的代码,用不同形式实现了相同的功能,其中
  * `cs_core` 是不同子模块共用的一些配置和代码
  * `bio` 使用传统的阻塞式输入输出流进行编写的,分为`server` 和`client`两部分
  * `nio`使用缓存区和通道编写的非阻塞式代码，同上↑

* 前缀`p2p` 是一个集中式`peer to peer`的文件传输服务,[查看具体说明](#P2P)
    * `common` 客户端服务端共有的数据对象，配置文件等
    * `client` 客户端
    * `server` 服务端
    
# 2. 项目具体说明
##P2P
> 简而言之就是一个点对点（Peer to Peer）的文件共享软件的实验性代码

### 简单流程如下：
* 各个客户端启动后向服务端报备ip和文件列表
* 各个客户端可以随时从服务端发送文件请求
* 服务端收到文件请求后根据报备的列表向客户端传送拥有该文件的客户端列表
* 请求文件的客户端根据特定的算法按照优先级向各个客户端请求文件内容块

### 注意：
* 目前仅在局域网下，或者各端具有独立的ip的情况下可以使用，todo：nat 穿透
* 所谓特定的算法，也就是指选择客户端的算法，目前对各个客户端的优先级设置为一样，todo：通过带宽，可用性等信息设置优先级

### 技术细节
* 文件数据按块通过udp传送，其他信息通过可靠的tcp链接传输，todo：数据校验
* tcp部分基本上使用BIO，udp使用NIO

### 实现细节

* C:LoginMessage+FileList -> S
* C:FileRequest ->S:ClientList->C
* C:BlockRequest ->C(other):BlockResponse